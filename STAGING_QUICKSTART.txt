╔══════════════════════════════════════════════════════════════════════╗
║                                                                      ║
║              🔄 STAGING ENVIRONMENT - QUICK START                    ║
║                                                                      ║
╚══════════════════════════════════════════════════════════════════════╝


WHAT IS STAGING?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Staging is a testing environment where you can test changes before
they go live to your users. Think of it as a "preview" of your app.

┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  You make changes → Test on STAGING → Deploy to PRODUCTION     │
│                                                                 │
│  staging branch  →  Test & Verify  →  main branch              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘


TWO ENVIRONMENTS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌──────────────────────────────────────────────────────────────────┐
│ STAGING (Testing)                                                │
│ ├─ Branch: staging                                               │
│ ├─ URL: YOUR_USERNAME-fpcalculator-staging.streamlit.app        │
│ └─ Purpose: Test changes before going live                       │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│ PRODUCTION (Live)                                                │
│ ├─ Branch: main                                                  │
│ ├─ URL: YOUR_USERNAME-fpcalculator.streamlit.app                │
│ └─ Purpose: Live app that users see                              │
└──────────────────────────────────────────────────────────────────┘


SETUP (ONE TIME)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

STEP 1: Create Staging Branch
   Double-click: create_staging.bat

STEP 2: Deploy Staging App
   1. Go to: https://share.streamlit.io
   2. Click "New app"
   3. Fill in:
      Repository: YOUR_USERNAME/fpcalculator
      Branch: staging  ← Important!
      Main file: false_positive_calculator.py
      App URL: YOUR_USERNAME-fpcalculator-staging
   4. Click "Deploy!"

STEP 3: Deploy Production App (if not done)
   1. Click "New app" again
   2. Fill in:
      Repository: YOUR_USERNAME/fpcalculator
      Branch: main  ← Important!
      Main file: false_positive_calculator.py
      App URL: YOUR_USERNAME-fpcalculator
   3. Click "Deploy!"

✅ Done! You now have two environments.


DAILY WORKFLOW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─────────────────────────────────────────────────────────────────┐
│ 1. DEVELOP ON STAGING                                           │
└─────────────────────────────────────────────────────────────────┘

   Double-click: switch_to_staging.bat
   
   Make your changes in the code editor
   
   Test locally:
   streamlit run false_positive_calculator.py
   
   Commit and push:
   git add .
   git commit -m "Add new feature"
   git push origin staging

┌─────────────────────────────────────────────────────────────────┐
│ 2. TEST ON STAGING                                              │
└─────────────────────────────────────────────────────────────────┘

   Visit: YOUR_USERNAME-fpcalculator-staging.streamlit.app
   
   Test all functionality
   Get feedback from team
   Make sure everything works

┌─────────────────────────────────────────────────────────────────┐
│ 3. PROMOTE TO PRODUCTION                                        │
└─────────────────────────────────────────────────────────────────┘

   When staging is tested and approved:
   
   Double-click: promote_to_production.bat
   
   ✓ Automatically merges staging → main
   ✓ Pushes to production
   ✓ Triggers deployment
   ✓ Returns you to staging for next changes


HELPER SCRIPTS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📁 create_staging.bat
   → One-time setup: creates staging branch

📁 switch_to_staging.bat
   → Switch to staging for development

📁 switch_to_main.bat
   → Switch to main (production)

📁 promote_to_production.bat
   → Deploy staging changes to production


EXAMPLE WORKFLOW
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Monday: Fix a bug
  1. Double-click: switch_to_staging.bat
  2. Fix the bug in your editor
  3. git add . && git commit -m "Fix calculation bug"
  4. git push origin staging
  5. Test on staging URL
  6. Double-click: promote_to_production.bat
  ✓ Bug fix is now live!

Tuesday: Add new feature
  1. Double-click: switch_to_staging.bat
  2. Add new visualization
  3. git add . && git commit -m "Add ROC curve"
  4. git push origin staging
  5. Test on staging URL
  6. Get team feedback
  7. Make adjustments if needed
  8. Double-click: promote_to_production.bat
  ✓ New feature is now live!


WHY USE STAGING?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ Catch bugs before users see them
✅ Test changes in real deployment environment
✅ Get feedback before going live
✅ Safe rollback if something goes wrong
✅ Professional development workflow
✅ No downtime for production users


BEST PRACTICES
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ DO:
   - Always develop on staging first
   - Test thoroughly before promoting
   - Use descriptive commit messages
   - Keep staging and main in sync

❌ DON'T:
   - Push untested code to main
   - Skip the staging environment
   - Force push to main branch


TROUBLESHOOTING
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Q: Which branch am I on?
A: Run: git branch --show-current

Q: Staging app not updating?
A: Wait 1-2 minutes for Streamlit Cloud to redeploy

Q: Merge conflict during promotion?
A: The script will guide you through resolving it

Q: Want to undo changes?
A: git checkout -- filename.py (before commit)


MORE HELP
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📄 STAGING_SETUP.md - Detailed setup guide
📄 WORKFLOW.md - Complete workflow documentation
📄 CONTRIBUTING.md - Contribution guidelines


╔══════════════════════════════════════════════════════════════════════╗
║                                                                      ║
║              Ready to start? Run create_staging.bat! 🚀              ║
║                                                                      ║
╚══════════════════════════════════════════════════════════════════════╝

